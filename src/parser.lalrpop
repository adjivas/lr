use lexer;
use ast;

use std::str::FromStr;

use lexer::{Tok,Lexer,LexicalError};
use lalrpop_util::ParseError;

grammar;

pub Program = <Statement*>;

Statement: ast::Stmt = {
    Statement "/" =>? Err(ParseError::User { error: LexicalError::Other }),
    "+" => ast::Stmt::Add,
    "\t" "\n" => ast::Stmt::Return,
    "\n" "\n" => ast::Stmt::Exit,
    ! =>? Err(ParseError::User { error: LexicalError::Other }),
};

extern {
    type Location = lexer::Loc;
    type Error = lexer::LexicalError;

    enum lexer::Tok {
        "/" => lexer::Tok::Div,
        "+" => lexer::Tok::Add,
        "\t" => lexer::Tok::Tab,
        "\n" => lexer::Tok::Linefeed,
    }
}
